class PgBackendProviderLocal{constructor(){var e=require("nw.gui");this.path=require("path"),this.data_dir=this.path.join(e.App.dataPath,"pg_tutorials")}callApi(e,a,r,t){return this[e]?this[e](a,r,t):(t&&t({error:`Unknown local API call ${e}.`}),null)}getProjectDir(e){return this.path.join(this.data_dir,e)}apiGetProjects(r,e,a){var r={user:{name:"Local user",level:2,email:"",id:1},projects:[],lessons:{}},t={};if(localStorage["lessons"]&&(t=JSON.parse(localStorage["lessons"])),$.each(t,function(e,a){e in r.lessons||(r.lessons[e]=a)}),localStorage.pgRecentFiles)for(var t=JSON.parse(localStorage.pgRecentFiles),s=pinegrow.thumbnailMaker.enabled,l=[],o=(r.projects=t.map(function(e){var a,r=e.file,t=(r.startsWith("internal:")||(r=crsaMakeUrlFromFile(e.file)),s&&(a=e.thumb?pgMakeFileUrl(crsaGetBaseForUrl(window.location.href)+e.thumb):pinegrow.thumbnailMaker.getStoredThumbnailUrl(e.file)),crsaGetNameFromUrl(r));return l.push(r),{name:t,url:r,project_id:r,thumb:a,is_file:!e.project}}),pgGetUniqueShortNamesForUrls(l)),i=0;i<o.length;i++){var n=pgUrlToDisplayString(o[i]);50<n.length&&(n="&hellip;"+n.substr(n.length-50)),r.projects[i].name=n}e(r)}apiLoadProject(e,a,r){r({status:404})}apiSaveProject(e,a,r){var t=this.getProjectDir(e.project_id);crsaCreateDirs(t),$.each(e.urls,function(e,a){})}apiDeleteProjects(e,a,r){var t=this;e.project_ids.forEach(function(e){var a,r=t.path.join(t.data_dir,e.replace("tutorial_",""));crsaIsFileExist(r)&&((a=new CrsaFile).path=r,a.deleteFileAndFolder(r))}),a&&a()}apiSetLessonStatus(e,a,r){var t={};(t=localStorage["lessons"]?JSON.parse(localStorage["lessons"]):t)[e.lesson_id]=e.status,localStorage["lessons"]=JSON.stringify(t),a&&a()}apiSetLessonStatusMultiple(a,e,r){var t={};localStorage["lessons"]&&(t=JSON.parse(localStorage["lessons"])),a.lesson_ids.forEach(function(e){t[e]=a.status}),localStorage["lessons"]=JSON.stringify(t),e&&e()}}